<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Welcome to ERP System</title>
  <style>
    /* Reset */
    * {
      box-sizing: border-box;
    }

    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      overflow: hidden;
      background: #1a1f2e; /* dark navy background */
      color: #eee;
    }

    /* Background container */
    .background {
      position: fixed;
      width: 100%;
      height: 100%;
      top: 0; left: 0;
      background: #1a1f2e;
      overflow: hidden;
      z-index: -1;
    }

    /* Animated waves */
    .wave {
      position: absolute;
      width: 200%;
      height: 100%;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255, 255, 255, 0.1);
      border-radius: 45% 55% 50% 50% / 60% 60% 40% 40%;
      animation-timing-function: ease-in-out;
      animation-iteration-count: infinite;
    }

    .wave1 {
      bottom: 0;
      animation-name: wave1anim;
      animation-duration: 14s;
      animation-direction: alternate;
      background: rgba(255, 255, 255, 0.08);
    }

    .wave2 {
      bottom: 10%;
      animation-name: wave2anim;
      animation-duration: 17s;
      animation-direction: alternate-reverse;
      opacity: 0.07;
      background: rgba(255, 255, 255, 0.05);
    }

    @keyframes wave1anim {
      0% { transform: translateX(-50%) translateY(0) scale(1); }
      50% { transform: translateX(-55%) translateY(-12px) scale(1.05); }
      100% { transform: translateX(-50%) translateY(0) scale(1); }
    }

    @keyframes wave2anim {
      0% { transform: translateX(-50%) translateY(6px) scale(1); }
      50% { transform: translateX(-45%) translateY(-8px) scale(1.1); }
      100% { transform: translateX(-50%) translateY(6px) scale(1); }
    }

    /* Centered form container */
    .login-container {
      position: relative;
      background: #252b44; /* darker bluish container */
      padding: 40px 50px;
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.7);
      width: 100%;
      max-width: 400px;
      margin: auto;
      top: 50%;
      transform: translateY(-50%);
      text-align: center;
      z-index: 10;
      color: #eee;
    }

    h1 {
      margin-bottom: 8px;
      color: #a8dadc;
      font-weight: 700;
    }
    h2 {
      margin-bottom: 24px;
      color: #89c2d9;
      font-weight: 600;
      font-size: 1.2rem;
    }

    label {
      display: block;
      margin-bottom: 6px;
      font-weight: 600;
      color: #ccc;
      text-align: left;
    }

    input[type="email"],
    input[type="password"] {
      width: 100%;
      padding: 12px 15px;
      margin-bottom: 20px;
      border: 1.8px solid #555;
      border-radius: 8px;
      font-size: 16px;
      background: #3a4062;
      color: #eee;
      transition: border-color 0.3s ease, background-color 0.3s ease;
    }

    input[type="email"]::placeholder,
    input[type="password"]::placeholder {
      color: #999;
    }

    input[type="email"]:focus,
    input[type="password"]:focus {
      border-color: #a8dadc;
      background: #49567a;
      outline: none;
      box-shadow: 0 0 8px rgba(168, 218, 220, 0.7);
      color: #fff;
    }

    button {
      width: 100%;
      padding: 14px;
      background-color: #a8dadc;
      color: #1a1f2e;
      font-size: 18px;
      font-weight: 700;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    button:hover:enabled {
      background-color: #89c2d9;
      color: #15222e;
    }

    button:disabled {
      background-color: #627d8a;
      cursor: not-allowed;
      color: #bcccdc;
    }

    .error-msg {
      color: #ff6b6b;
      margin-top: 10px;
      font-weight: 600;
      min-height: 20px;
      font-size: 14px;
      text-align: center;
    }

    @media (max-width: 450px) {
      .login-container {
        padding: 30px 25px;
      }
      input[type="email"],
      input[type="password"] {
        font-size: 14px;
        padding: 10px 12px;
      }
      button {
        font-size: 16px;
        padding: 12px;
      }
    }
  </style>
</head>
<body>
  <div class="background">
    <div class="wave wave1"></div>
    <div class="wave wave2"></div>
  </div>

  <div class="login-container" role="main" aria-label="Login Form">
    <h1>Welcome!</h1>
    <h2>Login to continue</h2>
    <form id="login-form" autocomplete="off" novalidate>
      <label for="email">Email</label>
      <input type="email" id="email" placeholder="you@example.com" required aria-required="true" aria-describedby="emailHelp" />

      <label for="password">Password</label>
      <input type="password" id="password" placeholder="Enter your password" required aria-required="true" />

      <button type="submit" id="submit-btn" disabled>Login</button>
      <p id="login-error" class="error-msg" aria-live="polite"></p>
    </form>
  </div>

  <script>
    const form = document.getElementById('login-form');
    const submitBtn = document.getElementById('submit-btn');
    const errorEl = document.getElementById('login-error');

    function validateForm() {
      errorEl.textContent = '';

      const email = form.email.value.trim();
      const password = form.password.value;
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

      const valid = emailRegex.test(email) && password.length > 0;
      submitBtn.disabled = !valid;
    }

    form.addEventListener('input', validateForm);

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      errorEl.textContent = '';

      const loginData = {
        email: form.email.value.trim(),
        password: form.password.value,
      };

      try {
        const response = await fetch('http://localhost:5000/api/auth/login', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify(loginData),
        });

        const data = await response.json();

        if (!response.ok) {
          errorEl.textContent = data.message || 'Login failed. Please try again.';
        } else {
          alert('Login successful! Redirecting...');
          localStorage.setItem('token', data.token);
          window.location.href = 'dashboard.html';
        }
      } catch (error) {
        errorEl.textContent = 'Server error. Please try again later.';
        console.error(error);
      }
    });

    validateForm(); // initial validation
  </script>
</body>
</html>
